focus_tree = {
	id = XMD_focus
	
	country = {
		factor = 0
		
		modifier = {
			add = 100
			tag = XMD
		}
	}
	
	default = no
	
	continuous_focus_position = { x = 50 y = 6000 }

	focus = {
		id = XMD_the_president_from_the_future
		icon = GFX_focus_spa_no_compromise_on_carlist_ideals
		#prerequisite = { focus = }
		x = 20
		y = 0
		#relative_position_id = 

		cost = 4

		ai_will_do = {
			factor = 1
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			country_event = {
				id = XMD_political_events.1
				hours = 3
			}
			event_option_tooltip = XMD_political_events.1.a
		}
	}
	
	focus = {
		id = XMD_fix_the_present_problems
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_the_president_from_the_future }
		x = 0
		y = 1
		relative_position_id = XMD_the_president_from_the_future

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			country_event = {
				id = XMD_political_events.2
				hours = 3
			}
			event_option_tooltip = XMD_political_events.2.a
		}
	}
	
	focus = {
		id = XMD_recover_the_economy
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_fix_the_present_problems }
		x = -2
		y = 1
		relative_position_id = XMD_fix_the_present_problems

		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			unlock_decision_category_tooltip = XMD_the_great_depression_cat
		}
	}
	
	focus = {
		id = XMD_mend_the_political_divide
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_fix_the_present_problems }
		x = 2
		y = 1
		relative_position_id = XMD_fix_the_present_problems

		cost = 8

		ai_will_do = {
			factor = 1
		}

		available = {

		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			country_event = XMD_political_events.3
		}
	}
	
	focus = {
		id = XMD_build_back_better_act
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_mend_the_political_divide }
		prerequisite = { focus = XMD_recover_the_economy }
		mutually_exclusive = { focus = XMD_end_the_experiment }
		x = 1
		y = 1
		relative_position_id = XMD_recover_the_economy

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			has_country_flag = XMD_pol_vote_passed
			has_country_flag = XMD_balancing_the_budget_flag
		}
		
		bypass = {
			has_idea = XMD_build_back_better_act_idea
			NOT = {
				any_owned_state = {
					is_controlled_by = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			effect_tooltip = {
				swap_ideas = {
					remove_idea = XMD_stagnating_economy
					add_idea = XMD_build_back_better_act_idea
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_idea = XMD_stagnating_economy
					}
					swap_ideas = {
						remove_idea = XMD_stagnating_economy
						add_idea = XMD_build_back_better_act_idea
					}
				}
				else = {
					add_ideas = XMD_build_back_better_act_idea
				}
			}
			if = {
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = XMD_win_the_hearts_of_the_people
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_build_back_better_act }
		x = -6
		y = 1
		relative_position_id = XMD_build_back_better_act

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			add_political_power = 50
			add_popularity = {
				ideology = ROOT
				popularity = 0.05
			}
			swap_ruler_traits = { remove = XMD_the_president_from_the_future add = XMD_the_president_from_the_future_1 }
		}
	}
	
	focus = {
		id = XMD_the_new_deal
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_win_the_hearts_of_the_people }
		x = 0
		y = 1
		relative_position_id = XMD_win_the_hearts_of_the_people

		cost = 10

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			effect_tooltip = {
				swap_ideas = {
					remove_idea = XMD_build_back_better_act_idea
					add_idea = XMD_the_new_deal_idea
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_idea = XMD_build_back_better_act_idea
					}
					swap_ideas = {
						remove_idea = XMD_build_back_better_act_idea
						add_idea = XMD_the_new_deal_idea
					}
				}
				else = {
					add_ideas = XMD_the_new_deal_idea
				}
			}
		}
	}
	
	focus = {
		id = XMD_further_the_progressive_reforms
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_the_new_deal}
		x = -4
		y = 1
		relative_position_id = XMD_the_new_deal

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			effect_tooltip = {
				swap_ideas = {
					remove_idea = XMD_the_new_deal_idea
					add_idea = XMD_the_new_deal_idea_1
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_idea = XMD_the_new_deal_idea
					}
					swap_ideas = {
						remove_idea = XMD_the_new_deal_idea
						add_idea = XMD_the_new_deal_idea_1
					}
				}
				else = {
					add_ideas = XMD_the_new_deal_idea_1
				}
			}

		}
	}
	
	focus = {
		id = XMD_establish_a_great_society
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_further_the_progressive_reforms}
		x = 0
		y = 1
		relative_position_id = XMD_further_the_progressive_reforms

		cost = 10

		ai_will_do = {
			factor = 1
		}

		available = {
			NOT = {
				has_country_flag = XMD_cannot_sign_any_new_legislation
			}
		}
		
		bypass = {
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			effect_tooltip = {
				swap_ideas = {
					remove_idea = XMD_the_new_deal_idea
					add_idea = XMD_the_new_deal_idea_1
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_idea = XMD_the_new_deal_idea
					}
					swap_ideas = {
						remove_idea = XMD_the_new_deal_idea
						add_idea = XMD_the_new_deal_idea_1
					}
				}
				else = {
					add_ideas = XMD_the_new_deal_idea_1
				}
			}

		}
	}
	
	focus = {
		id = XMD_end_the_experiment
		icon = GFX_focus_spa_eliminate_the_carlists
		prerequisite = { focus = XMD_mend_the_political_divide }
		prerequisite = { focus = XMD_the_war_on_poverty }
		mutually_exclusive = { focus = XMD_build_back_better_act }
		x = -1
		y = 1
		relative_position_id = XMD_mend_the_political_divide

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			has_country_flag = XMD_pol_vote_failed 
		}
		
		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			country_event = {
				id = XMD_political_events.5
				days = 5
			}
		}
	}

}		
